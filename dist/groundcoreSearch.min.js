!function(e){e.fn.groundcoreSearch=function(r){function t(r){var t=r,a=new RegExp(t,"i"),o="",d=0,u=0;e.each(n,function(e,r){if(u===s.limit)return!1;s.searchConditions(r,a)&&(o+=s.renderItem(r),u++),d++}),0===u&&(o=s.renderNoResults()),i.html(o)}function a(r){var t=e.ajax({ifModified:!0,dataType:"json",data:s.data,method:s.method,url:s.searchUrl});t.done(function(e){n=e,r.trigger("groundcoreSearch:data:loaded")}),t.fail(function(e){console.log(e.message),alert(e.message)})}var n,o={searchUrl:!1,appendResultTo:!1,resultWrapperAttrs:{id:"groundcore-search-result",class:"list-group"},resultWrapperCss:{},method:"GET",data:{},minChar:3,maxChar:30,limit:25,searchConditions:function(e,r){return-1!==e.name.search(r)},renderItem:function(e){return"<div>"+e.name+"</div>"},renderNoResults:function(){return'<ul class="list-group"><li class="list-group-item">No result.</li></ul>'}},s=e.extend(!0,{},o,r),i=e("<div />").attr(s.resultWrapperAttrs).css(s.resultWrapperCss);!function(r){e(r).attr("disabled",!0),s.appendResultTo?e(s.appendResultTo).append(i):r.parents(".form-group").after(i),!1===s.searchUrl&&alert("[groundcoreSearch] Option searchUrl not set."),a(r)}(this),this.on("keyup",function(e){13==e.keyCode&&e.preventDefault();var r=new RegExp("^[a-zA-Z0-9]+$"),a=String.fromCharCode(e.charCode?e.charCode:e.which),n=this.value;n.trim().length<s.minChar&&i.empty(),n.trim().length>=s.minChar&&n.trim().length<s.maxChar&&(r.test(a)||8==e.keyCode)&&t(n)}),this.on("groundcoreSearch:data:loaded",function(r){e(this).attr("disabled",!1)})}}(jQuery);